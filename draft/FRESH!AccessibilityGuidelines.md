# FRESH! Accessibility Guidelines

## 概要

FRESH! Accessibility Guidelinesは [FRESH!](https://freshlive.tv)のサービスを利用するすべてのユーザーがコンテンツを楽しみ、そして配信できるようにするための制作指針集である。

FRESH!のサービスに携わるコンテンツ、及びUIの開発者（フロントエンドエンジニア / デザイナーなど）は、高品質なサービスを提供するため、ガイドラインに沿った制作/開発を **強く推奨する**

## 対象

- FRESH! 視聴面 [https://freshlive.tv](https://freshlive.tv)
- FRESH! 配信管理画面 [https://broadcast.freshlive.tv](https://broadcast.freshlive.tv)

のすべてのページとコンテンツを対象とする。配信管理画面では、管理画面のアクセシビリティと同時に、ユーザーがアクセシブルなコンテンツを提供できるよう努めるが、ユーザーから提供されるコンテンツや情報そのものは本ガイドラインの対象外とする

## 視聴面

### 1 知覚可能

情報及びUIは、利用者が知覚できる方法で利用者に提示可能でなければならない

#### 1.1 代替テキスト

##### 1.1.1 非テキストコンテンツの代替テキスト

非テキストコンテンツ（画像など）には代替テキストを提供する

###### 実装方法 / 解説

1. [`img` 要素には `alt` 属性で代替テキストを提供する](http://waic.jp/docs/WCAG-TECHS/H37)

解説 : [非テキストコンテンツ:達成基準 1.1.1 を理解する | WCAG2.0解説書](http://waic.jp/docs/UNDERSTANDING-WCAG20/text-equiv-all.html)

###### テスト方法

1. ESlintによる自動チェック
  1. [eslint-plugin-jsx-a11y/accessible-emoji](https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/accessible-emoji.md)
  2. [eslint-plugin-jsx-a11y/img-has-alt](https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/img-has-alt.md)
  3. [eslint-plugin-jsx-a11y/iframe-has-title](https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/iframe-has-title.md)
2. [aXe](https://www.deque.com/products/axe/) による自動チェック
3. コードレビューによるチェック

##### 1.1.2 コントロール、入力のテキスト

ユーザーが操作するコントロールや入力を受け付けるUIは、目的を説明する名前をテキストで提供する

###### 実装方法 / 解説

1. [`label`要素を用いてテキストのラベルとフォーム・コントロールを関連付ける](http://waic.jp/docs/WCAG-TECHS/H44)
2. [`a`要素のリンクの目的を説明するリンクテキストを提供する](http://waic.jp/docs/WCAG-TECHS/H30)
3. [`aria-label`を用いてオブジェンクとのラベルを提供する](http://www.w3.org/TR/WCAG20-TECHS/ARIA6)

解説 : [達成基準 1.1.1 を理解する | WCAG 2.0解説書](http://waic.jp/docs/UNDERSTANDING-WCAG20/text-equiv-all.html#text-equiv-all-situation-c-controls)

#### 1.2 動画、音声メディアに代替コンテンツを提供する

##### 1.2.1 収録済の音声及び動画に代替コンテンツを提供する

###### 実装方法 / 解説

1. 動画に[キャプション](http://waic.jp/docs/UNDERSTANDING-WCAG20/media-equiv-captions.html)を提供する
2. 音声メディア、音声がある動画には[書き起こしのテキストなど](http://waic.jp/docs/WCAG-TECHS/G69.html)を提供する
3. 1,2 が難しい場合動画や音声メディアについてのテキストによる解説や要約を提供する

解説 : [時間依存メディア:ガイドライン 1.2 を理解する | WCAG 2.0解説書](http://waic.jp/docs/UNDERSTANDING-WCAG20/media-equiv.html)

#### 1.3 適応可能

情報、及び構造を損なうことなく、様々な方法で提供できるようにコンテンツを制作すること

##### 1.3.1 情報及び関係性

コンテンツやUI、及びそれらの関係性をテキストで提供するか、プログラムによる解釈が可能な状態にする

###### 実装方法 / 解説

1. 適切な要素を用いてマークアップする。次に例として挙げるのは代表的な例でこれに限らない。
  1.1 [見出しを特定するために、h1 要素～ h6 要素を使用する](http://waic.jp/docs/WCAG-TECHS/H42.html)
  1.2 [リストは `ul` , `ol` , `dl` を用いる](http://waic.jp/docs/WCAG-TECHS/H48.html)
  1.3 [表の情報を提示するために、テーブルのマークアップを使用する](http://waic.jp/docs/WCAG-TECHS/H51.html)

解説 : [情報及び関係性:達成基準 1.3.1 を理解する | WCAG 2.0解説書](http://waic.jp/docs/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html)

##### 1.3.2 意味のある順序

コンテンツの順番に意味がある場合は、正しく読む順番をプログラムによる解釈を可能にする

###### 実装方法 / 解説

1. [DOMの順番と表示順を一致させる](http://waic.jp/docs/WCAG-TECHS/C27)
2. [単語内の文字間を空けるためなど、文書の整形にスペースを利用](http://waic.jp/docs/WCAG-TECHS/F32.html)しない

解説 : [意味のある順序:達成基準 1.3.2 を理解する | WCAG 2.0解説書](http://waic.jp/docs/UNDERSTANDING-WCAG20/content-structure-separation-sequence.html)

##### 1.3.3 感覚的な特徴

コンテンツやUIの説明は、色や形、視覚的な位置や方向、音などの感覚的な特徴だけで説明しない

###### 実装方法 / 解説

1. [UIやコンテンツについて形、または位置のみで特定](http://waic.jp/docs/WCAG-TECHS/F14)しない
2. [UIやコンテンツについて指示、もしくは解説する文章にはUIのラベルテキストや機能についても言及する。](http://waic.jp/docs/WCAG-TECHS/G96)

解説 : [感覚的な特徴:達成基準 1.3.3 を理解する | WCAG 2.0解説書](http://waic.jp/docs/UNDERSTANDING-WCAG20/content-structure-separation-understanding.html)

#### 1.4 判別可能

コンテンツを、利用者にとって見やすく、聞きやすいものにすること。

##### 1.4.1 色の使用

色が、情報を伝える、動作を示す、反応を促す、又は視覚的な要素を判別するための唯一の視覚的手段としない

###### 実装方法 / 解説

1. [色の違いで伝えている情報をテキストでも伝える](http://waic.jp/docs/WCAG-TECHS/G14)
2. [色と模様、記号を併用する](http://waic.jp/docs/WCAG-TECHS/G111)

解説 : [色の使用:達成基準 1.4.1 を理解する | WCAG 2.0解説書](http://waic.jp/docs/UNDERSTANDING-WCAG20/visual-audio-contrast-without-color.html)

##### 1.4.2 音声の制御

可能な限り音声を自動的に再生しない。音声が自動的に再生される場合は、音声を停止、またはコンテンツの音量を調整できるメカニズムを提供する。

1. [ユーザーが望む（と予想できる）際に限って音声を自動的に再生する](http://waic.jp/docs/WCAG-TECHS/G171)
2. 動画プレイヤーには音声の調整ボタン、ミュートボタンを搭載する

##### 1.4.3 コントラスト

コンテンツやUI上のテキストやアイコンと背景に適切なコントラスト比を持たせる（4.5:1以上を推奨）。ただし、次の場合は除くが、可能な限りコントラスト比を確保する。

- 装飾的な文字、意味のない文字
- 操作不可能なUI上のテキスト
- ロゴタイプ

###### 実装方法 / 解説

解説 : [コントラスト (最低限) : 達成基準 1.4.3 を理解する | WCAG 2.0解説書](http://waic.jp/docs/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html)

### 2 操作可能

UIコンポーネント及びナビゲーションは操作可能でなければならない。

#### 2.1 さまざまなデバイスでの操作

##### 2.1.1 キーボード、タッチデバイスでの操作

コンテンツやUIのすべての機能は、キーボードやタッチインタフェースで操作できるようにする。

###### 実装方法 / 解説

**良くない実装例**

フォーカスを受け取れない要素への `click` イベントの付与や `hover` 擬似クラスのみを利用したコンテンツの出し分けなど

```
<div onClick={}>
  content...
 </div>
```

**良い実装例**

フォーカスを受け取れる要素の使用、 `focus` 擬似クラスの併用など

```
<button type="button" onClick={}>
   content...
</button>
```

1. [HTMLのフォームコントロール、及びリンクを使用する](http://waic.jp/docs/WCAG-TECHS/H91)

**解説**

マウスのみを想定しているUIでは、他のデバイスから使用できないことが多くあるが、キーボードやタッチデバイスでの操作を担保することで他のデバイスによる操作もカバーしやすい

[キーボード - 達成基準 2.1.1 を理解する | WCAG 2.0解説書](http://waic.jp/docs/UNDERSTANDING-WCAG20/keyboard-operation-keyboard-operable.html)

###### 例外

- 手書き入力など、根本的な機能が始点から終点まで続く一連の軌跡に依存している機能

※ドラッグアンドドロップ操作は軌跡に依存しないので、この例外には当てはまらない

##### 2.1.2 シンプルな操作で操作できるようにする

コンテンツやUIのすべての機能は、複雑な操作に依存せずシンプルな操作で操作できるようにする。

###### 実装方法 / 解説

複雑な操作例 : 

1. 10秒以内に <kbd>↑</kbd><kbd>↑</kbd><kbd>↓</kbd><kbd>↓</kbd><kbd>←</kbd><kbd>→</kbd><kbd>←</kbd><kbd>→</kbd><kbd>a</kbd><kbd>b</kbd><kbd>a</kbd><kbd>b</kbd> を入力しないと出てこないメニュー
2. <kbd>→</kbd><kbd>↓</kbd><kbd>→</kbd>+<kbd>↓</kbd><kbd>p</kbd> を0.3秒以内に入力しないと出ない必殺技

##### 2.1.3 特定のデバイスの機能に依存しない

コンテンツやUIのすべての機能は、デバイスの特定の機能（タッチの圧力センサや、傾きセンサ）などに依存しなくても使用できるようにする。

###### 実装方法 / 解説

**良くない実装例**

iOS のフォースタッチでのみ動作するメニュー

**良い実装**

他の操作方法に切り替える OR 代替の動作方法を提供する

###### 例外

- VR（Virtual Reality）など、特定のデバイス専用に制作されているコンテンツ
- ペンの筆圧検知による線の太さの変更など、特定のデバイス専用の機能

##### 2.1.3 タッチターゲットサイズ

ポインティングのターゲットサイズは、タッチインタフェース向けUIでは 44×44 px以上を確保する

###### 実装 / 解説

- ボタンUIやナビゲーションリンクに十分な余白を設ける

**解説**

タッチインターフェースにおいて、一つの指でタップするのにターゲットサイズが小さすぎると快適に操作できない。また視線入力デバイスなどのユーザービリティも向上する。

[ハーティーラダーでＷｅｂ閲覧 - YouTube](https://www.youtube.com/watch?v=g1iLTtjLD8E)

###### 例外

- 文章中のテキストリンク（※ただし、十分なフォントサイズを確保し、読みやすさだけでなく操作のしやすさも確保する）

#### 2.2 十分な時間

利用者がコンテンツを読み、使用するために十分な時間を提供すること。

##### 2.2.1 コンテンツの制限時間

コンテンツになるべく制限時間を設けない。設定する場合は、次にあげる事項のうち、いずれかを満たすようにする。

- 制限時間があるコンテンツを利用する前に、制限時間を解除、又はデフォルトの10倍以上の制限時間に変更することができる
- 時間切れとなる前に警告し、20秒前には簡単な操作で制限時間を延長することができる
- リアルタイムのイベント（ライブ配信中に取得するアンケートなど）において、制限時間が必須の場合は例外とする
- 制限時間が必須ではない場合でも、少なくとも15秒の制限時間を設ける

##### 2.2.2 一時停止、停止、非表示

動きのある、点滅している、スクロールする、又は自動更新する情報は、次のすべての事項を満たすようにする動き、点滅、スクロールしている情報が、自動的に開始し、5秒よりも長く継続し、かつその他のコンテンツと並行して提示される場合、それらがコンテンツとして必須出ない場合、利用者がそれらを一時停止、停止、非表示にすることができるメカニズムを提供する自動更新されるコンテンツが、自動的に開始し、その他のコンテンツと並行して提示される場合、それらがコンテンツとして必須出ない場合、利用者がそれらを一時停止、停止、非表示にすることができるメカニズムを提供する

#### 2.3 発作の防止

発作を引き起こすようなコンテンツを設計しないこと。

##### 2.3.1 3回の閃光、又は閾値以下

ウェブページには、どの1秒間においても3回を超える閃光を放つものがない、又は閃光が一般閃光閾値及び赤色閃光閾値を下回っている。

#### 2.4 ナビゲーション可能

利用者がナビゲートしたり、コンテンツを探し出したり、現在位置を確認したりすることを手助けする手段を提供すること

##### 2.4.1 ブロックスキップ

複数のページ上で繰り返されているコンテンツのブロックをスキップするメカニズムが利用できる

##### 2.4.2 ページタイトル

ウェブページには、主題又は目的を説明したタイトルがある

### 3 理解可能

#### 3.1 読みやすさ

##### 3.1.1 ページの言語

それぞれのウェブページのデフォルトの自然言語がどの言語であるか、プログラムによる解釈が可能である。

#### 3.2 予測可能

##### 3.2.1 フォーカス時

いずれのコンポーネントも、フォーカスを受け取ったときにコンテキストの変化を引き起こさない。

##### 3.2.2 入力時

UIコンポーネントの設定を変更することが、コンテキストの変化を自動的に引き起こさない。ただし、利用者が使用する前にその挙動を知らせてある場合を除く。

#### 3.3 入力支援

##### 3.3.1 エラーの特定

入力エラーが自動的に検出された場合は、エラーとなっている箇所が特定され、そのエラーが利用者にテキストで説明される

##### 3.3.2 ラベル又は説明

コンテンツが利用者の入力を要求する場合は、ラベル又は説明文が提供されている

### 4 堅牢性

コンテンツは、支援技術を含む様々なUAが確実に解釈できるよう十分に堅牢 (robust) でなければならない。

#### 4.1 構文解析

マークアップ言語を用いて実装されているコンテンツやUIは、要素には完全な開始タグ及び終了タグがあり、要素は仕様に準じて入れ子になっていて、要素には重複した属性がなく、どのIDも一意的である。ただし、仕様で認められているものを除く。

#### 4.2 名前・役割、及び値

ユーザーが操作するすべてのUI(フォームを構成する要素、リンクなど）では、名前 (name) 及び役割 (role) は、プログラムによる解釈が可能である。又、状態、プロパティ、利用者が設定可能な値はプログラムによる設定が可能である。そして、支援技術を含むUAが、これらの項目に対する変更通知を利用できる

## [WIP]配信面

TODO : ATAG level Aをベースに作成する

### Make the Authoring tool user interface accessible

### Support the production of accessible content